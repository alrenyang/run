<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - íšŒì› ê´€ë¦¬</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <aside>
        <div class="sidebar-header">
            <a href="index.html">DASHBOARD</a>
        </div>
        <nav>
            <a href="index.html" class="nav-item">
                <span class="nav-icon">ğŸ </span>
                <span>í™ˆ</span>
            </a>
            <a href="members.html" class="nav-item active">
                <span class="nav-icon">ğŸ‘¤</span>
                <span>íšŒì› ê´€ë¦¬</span>
            </a>
            <a href="records.html" class="nav-item">
                <span class="nav-icon">ğŸ“‹</span>
                <span>ê¸°ë¡ í™•ì¸</span>
            </a>
        </nav>
    </aside>

    <main>
        <header>
            <div style="display: flex; align-items: center; justify-content: space-between; width: 100%;">
                <h1>íšŒì› ê´€ë¦¬</h1>
                <button class="btn btn-primary" onclick="openModal()">
                    <span style="font-size: 1.2rem;">+</span> ì¶”ê°€
                </button>
            </div>
        </header>

        <div class="card">
            <h3 style="margin-bottom: 1.25rem;">íšŒì› ëª©ë¡</h3>
            <div style="overflow-x: auto; margin: 0 -1.25rem;">
                <table class="data-table" style="min-width: 600px;">
                    <thead>
                        <tr>
                            <th style="padding-left: 1.25rem;">ID</th>
                            <th>ì´ë¦„</th>
                            <th>ì´ë©”ì¼</th>
                            <th>ìƒíƒœ</th>
                            <th>ê°€ì…ì¼</th>
                            <th style="padding-right: 1.25rem; text-align: right;">ê´€ë¦¬</th>
                        </tr>
                    </thead>
                    <tbody id="member-list">
                        <!-- JS ë Œë”ë§ -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Popup Modal -->
    <div class="modal-overlay" id="modal-overlay" onclick="handleOverlayClick(event)">
        <div class="modal" id="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">íšŒì› ì¶”ê°€</h3>
                <button onclick="closeModal()" style="border:none; background:none; font-size: 1.75rem; cursor:pointer; color: var(--text-muted); padding: 0.5rem;">&times;</button>
            </div>
            <div class="modal-body">
                <form id="member-form" onsubmit="event.preventDefault();">
                    <input type="hidden" id="member-id">
                    <div class="form-group">
                        <label for="name">ì´ë¦„</label>
                        <input type="text" id="name" class="form-control" placeholder="ì„±í•¨ì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="email">ì´ë©”ì¼</label>
                        <input type="email" id="email" class="form-control" placeholder="example@mail.com" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="status">ê³„ì • ìƒíƒœ</label>
                        <select id="status" class="form-control" style="background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23666%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.4-12.8z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 1rem center; background-size: 0.65rem auto;">
                            <option value="í™œì„±">í™œì„± (Active)</option>
                            <option value="ì¤‘ì§€">ì¤‘ì§€ (Suspended)</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" id="save-btn" onclick="saveMember()">ì €ì¥í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        let members = JSON.parse(localStorage.getItem('dashboard_members')) || [
            { id: 1, name: 'ê¹€ì² ìˆ˜', email: 'chulsoo@example.com', status: 'í™œì„±', date: '2026-02-27' },
            { id: 2, name: 'ì´ì˜í¬', email: 'younghee@example.com', status: 'í™œì„±', date: '2026-02-26' },
            { id: 3, name: 'ë°•ì§€ë¯¼', email: 'jimin@example.com', status: 'ì¤‘ì§€', date: '2026-02-20' }
        ];

        function renderTable() {
            const tbody = document.getElementById('member-list');
            tbody.innerHTML = '';
            
            members.forEach(member => {
                const tr = document.createElement('tr');
                const statusBg = member.status === 'í™œì„±' ? '#f0fdf4' : '#fef2f2';
                const statusColor = member.status === 'í™œì„±' ? '#16a34a' : '#dc2626';
                
                tr.innerHTML = `
                    <td style="padding-left: 1.25rem; color: var(--text-muted); font-size: 0.8rem;">#${member.id}</td>
                    <td style="font-weight: 600;">${member.name}</td>
                    <td style="color: var(--text-muted);">${member.email}</td>
                    <td>
                        <span style="background: ${statusBg}; color: ${statusColor}; padding: 0.25rem 0.6rem; border-radius: 2rem; font-size: 0.75rem; font-weight: 700;">
                            ${member.status}
                        </span>
                    </td>
                    <td style="color: var(--text-muted); font-size: 0.85rem;">${member.date}</td>
                    <td style="padding-right: 1.25rem; text-align: right;">
                        <div style="display: flex; gap: 0.4rem; justify-content: flex-end;">
                            <button class="btn btn-outline btn-sm" onclick="editMember(${member.id})">ìˆ˜ì •</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteMember(${member.id})">ì‚­ì œ</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            localStorage.setItem('dashboard_members', JSON.stringify(members));
        }

        function openModal() {
            document.getElementById('modal-title').innerText = 'ì‹ ê·œ íšŒì› ë“±ë¡';
            document.getElementById('save-btn').innerText = 'ë“±ë¡í•˜ê¸°';
            document.getElementById('member-form').reset();
            document.getElementById('member-id').value = '';
            
            const overlay = document.getElementById('modal-overlay');
            overlay.style.display = 'flex';
            setTimeout(() => overlay.classList.add('active'), 10);
        }

        function closeModal() {
            const overlay = document.getElementById('modal-overlay');
            overlay.classList.remove('active');
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 300);
        }

        function handleOverlayClick(e) {
            if(e.target.id === 'modal-overlay') closeModal();
        }

        function saveMember() {
            const id = document.getElementById('member-id').value;
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const status = document.getElementById('status').value;
            
            if(!name || !email) {
                alert('ëª¨ë“  ì •ë³´ë¥¼ ì •í™•íˆ ì…ë ¥í•´ ì£¼ì„¸ìš”.');
                return;
            }

            if(id) {
                const index = members.findIndex(m => m.id == id);
                members[index] = { ...members[index], name, email, status };
            } else {
                const newId = members.length > 0 ? Math.max(...members.map(m => m.id)) + 1 : 1;
                const date = new Date().toISOString().split('T')[0];
                members.push({ id: newId, name, email, status, date });
            }

            renderTable();
            closeModal();
        }

        function editMember(id) {
            const member = members.find(m => m.id === id);
            if(!member) return;

            document.getElementById('modal-title').innerText = 'íšŒì› ì •ë³´ ìˆ˜ì •';
            document.getElementById('save-btn').innerText = 'ìˆ˜ì • ì™„ë£Œ';
            document.getElementById('member-id').value = member.id;
            document.getElementById('name').value = member.name;
            document.getElementById('email').value = member.email;
            document.getElementById('status').value = member.status;
            
            const overlay = document.getElementById('modal-overlay');
            overlay.style.display = 'flex';
            setTimeout(() => overlay.classList.add('active'), 10);
        }

        function deleteMember(id) {
            if(confirm('ì´ íšŒì›ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ë°ì´í„°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                members = members.filter(m => m.id !== id);
                renderTable();
            }
        }

        renderTable();
    </script>
</body>
</html>
