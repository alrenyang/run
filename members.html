<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - íšŒì› ê´€ë¦¬</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <aside>
        <div class="sidebar-header">
            <a href="index.html">DASHBOARD</a>
        </div>
        <nav>
            <a href="index.html" class="nav-item">
                <span class="nav-icon">ğŸ </span>
                <span>í™ˆ</span>
            </a>
            <a href="members.html" class="nav-item active">
                <span class="nav-icon">ğŸ‘¤</span>
                <span>íšŒì› ê´€ë¦¬</span>
            </a>
            <a href="records.html" class="nav-item">
                <span class="nav-icon">ğŸ“‹</span>
                <span>ê¸°ë¡ í™•ì¸</span>
            </a>
        </nav>
    </aside>

    <main>
        <header>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <h1>íšŒì› ê´€ë¦¬</h1>
                <button class="btn btn-primary" onclick="openModal()">
                    <span>+</span> ì¶”ê°€
                </button>
            </div>
            <div style="color: var(--text-muted); font-size: 0.875rem;">2026ë…„ 2ì›” 28ì¼</div>
        </header>

        <div class="card">
            <h3 style="margin-bottom: 1rem;">íšŒì› ëª©ë¡</h3>
            <div style="overflow-x: auto;">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>ì´ë¦„</th>
                            <th>ì´ë©”ì¼</th>
                            <th>ìƒíƒœ</th>
                            <th>ê°€ì…ì¼</th>
                            <th>ê´€ë¦¬</th>
                        </tr>
                    </thead>
                    <tbody id="member-list">
                        <!-- JSì—ì„œ ë Œë”ë§ -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Modal -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title">íšŒì› ì¶”ê°€</h3>
                <button onclick="closeModal()" style="border:none; background:none; font-size: 1.5rem; cursor:pointer; color: var(--text-muted);">&times;</button>
            </div>
            <div class="modal-body">
                <form id="member-form">
                    <input type="hidden" id="member-id">
                    <div class="form-group">
                        <label for="name">ì´ë¦„</label>
                        <input type="text" id="name" class="form-control" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                    </div>
                    <div class="form-group">
                        <label for="email">ì´ë©”ì¼</label>
                        <input type="email" id="email" class="form-control" placeholder="example@domain.com" required>
                    </div>
                    <div class="form-group">
                        <label for="status">ìƒíƒœ</label>
                        <select id="status" class="form-control">
                            <option value="í™œì„±">í™œì„±</option>
                            <option value="ì¤‘ì§€">ì¤‘ì§€</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="saveMember()">ì €ì¥</button>
            </div>
        </div>
    </div>

    <script>
        let members = JSON.parse(localStorage.getItem('dashboard_members')) || [
            { id: 1, name: 'ê¹€ì² ìˆ˜', email: 'chulsoo@example.com', status: 'í™œì„±', date: '2026-02-27' },
            { id: 2, name: 'ì´ì˜í¬', email: 'younghee@example.com', status: 'í™œì„±', date: '2026-02-26' },
            { id: 3, name: 'ë°•ì§€ë¯¼', email: 'jimin@example.com', status: 'ì¤‘ì§€', date: '2026-02-20' }
        ];

        function renderTable() {
            const tbody = document.getElementById('member-list');
            tbody.innerHTML = '';
            
            members.forEach(member => {
                const tr = document.createElement('tr');
                const statusColor = member.status === 'í™œì„±' ? '#16a34a' : '#dc2626';
                
                tr.innerHTML = `
                    <td>${member.id}</td>
                    <td>${member.name}</td>
                    <td>${member.email}</td>
                    <td><span style="color: ${statusColor}; font-weight: 600;">${member.status}</span></td>
                    <td>${member.date}</td>
                    <td>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-outline btn-sm" onclick="editMember(${member.id})">ìˆ˜ì •</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteMember(${member.id})">ì‚­ì œ</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            localStorage.setItem('dashboard_members', JSON.stringify(members));
        }

        function openModal() {
            document.getElementById('modal-title').innerText = 'íšŒì› ì¶”ê°€';
            document.getElementById('member-form').reset();
            document.getElementById('member-id').value = '';
            document.getElementById('modal-overlay').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('active');
        }

        function saveMember() {
            const id = document.getElementById('member-id').value;
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const status = document.getElementById('status').value;
            
            if(!name || !email) return alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');

            if(id) {
                // Edit
                const index = members.findIndex(m => m.id == id);
                members[index] = { ...members[index], name, email, status };
            } else {
                // Add
                const newId = members.length > 0 ? Math.max(...members.map(m => m.id)) + 1 : 1;
                const date = new Date().toISOString().split('T')[0];
                members.push({ id: newId, name, email, status, date });
            }

            renderTable();
            closeModal();
        }

        function editMember(id) {
            const member = members.find(m => m.id === id);
            if(!member) return;

            document.getElementById('modal-title').innerText = 'íšŒì› ìˆ˜ì •';
            document.getElementById('member-id').value = member.id;
            document.getElementById('name').value = member.name;
            document.getElementById('email').value = member.email;
            document.getElementById('status').value = member.status;
            
            document.getElementById('modal-overlay').classList.add('active');
        }

        function deleteMember(id) {
            if(confirm('ì •ë§ë¡œ ì´ íšŒì›ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                members = members.filter(m => m.id !== id);
                renderTable();
            }
        }

        // Initial Render
        renderTable();
    </script>
</body>
</html>
